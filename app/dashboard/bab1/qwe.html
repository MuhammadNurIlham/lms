<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Picture Quiz</title>
  <script src="/util/js/playAudio.js"></script>
  <style>
    table {
      border-collapse: collapse;
      width: 100%;
    }

    table, th, td {
      border: 1px solid black;
    }

    th, td {
      padding: 10px;
      text-align: left;
    }

    .options {
      display: flex;
      gap: 10px;
    }

    .option {
      cursor: pointer;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .option:hover {
      background-color: #f0f0f0;
    }

    .audio-button {
      cursor: pointer;
      display: inline-block;
      margin-left: 5px;
    }

    .sound-image {
      width: 20px;
      height: 20px;
    }
  </style>
</head>
<body>

<table id="quizTable">
  <thead>
    <tr>
      <th>Picture</th>
      <th>Options</th>
      <th>Check</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="picture1.jpg" alt="Picture 1"></td>
      <td class="options" id="options1">
        <!-- Options and Sounds will be added dynamically using JavaScript -->
      </td>
      <td><span id="check1"></span></td>
    </tr>
    <tr>
      <td><img src="picture2.jpg" alt="Picture 2"></td>
      <td class="options" id="options2">
        <!-- Options and Sounds will be added dynamically using JavaScript -->
      </td>
      <td><span id="check2"></span></td>
    </tr>
    <!-- Add more rows as needed -->
  </tbody>
</table>

<script>
    // Data for each question including the correct answer and sound
    var questions = [
      { correctOption: 'Option 1', options: ['Option 1', 'Option 2', 'Option 3'], soundPaths: ['/assets/sounds/bab_1/sub_1/ayo_menalar/2 mata.m4a', '/assets/sounds/sound1_option2.mp3', '/assets/sounds/sound1_option3.mp3'] },
      { correctOption: 'Option 2', options: ['Option 1', 'Option 2', 'Option 3'], soundPaths: ['/assets/sounds/sound2_option1.mp3', '/assets/sounds/sound2_option2.mp3', '/assets/sounds/sound2_option3.mp3'] },
      // Add more questions as needed
    ];
  
    // Function to generate options for a given row
    function generateOptions(row, question) {
      var optionsContainer = document.getElementById("options" + row);
  
      question.options.forEach(function (option, index) {
        var optionElement = document.createElement('span');
        optionElement.className = 'option';
        optionElement.textContent = option;
        optionElement.setAttribute('data-correct', option === question.correctOption); // Add data attribute for correct option
        optionElement.onclick = function() {
          selectOption(row, index);
        };
  
        // Create sound button using innerHTML
        var soundButton = document.createElement('span');
        soundButton.className = 'audio-button';
        soundButton.innerHTML = `<img src="/assets/image/sound.png" class="sound-image" onclick="play('${question.soundPaths[index]}')">`;
  
        // Append both option and sound button to the container
        optionsContainer.appendChild(optionElement);
        optionsContainer.appendChild(soundButton);
      });
    }
  
    // Function to handle option selection
    function selectOption(row, index) {
      var optionsContainer = document.getElementById("options" + row);
      var options = optionsContainer.getElementsByClassName("option");
  
      // Remove the click event listener from all options to prevent further clicks
      for (var i = 0; i < options.length; i++) {
        options[i].removeAttribute("onclick");
      }
  
      // Reset the background color of all options
      for (var i = 0; i < options.length; i++) {
        options[i].style.backgroundColor = "";
      }
  
      // Highlight the selected option
      options[index].style.backgroundColor = "#e0e0e0";
  
      // Get the check span element for this row
      var checkSpan = document.getElementById("check" + row);
  
      // Check if the selected option is correct
      if (options[index].getAttribute('data-correct') === 'true') {
        checkSpan.textContent = "Kamu Benar!";
        checkSpan.style.color = "green";
      } else {
        checkSpan.textContent = "Kamu Salah!";
        checkSpan.style.color = "red";
      }
  
      // Add click event listeners back to options for the next attempt
      for (var i = 0; i < options.length; i++) {
        options[i].setAttribute("onclick", "selectOption(" + row + ", " + i + ")");
      }
    }
  
    // Dynamically generate options for each question
    for (var i = 0; i < questions.length; i++) {
      generateOptions(i + 1, questions[i]);
    }
  </script>

</body>
</html>
